!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.vueMusic=s():t.vueMusic=s()}(this,function(){return function(t){function s(e){if(i[e])return i[e].exports;var n=i[e]={exports:{},id:e,loaded:!1};return t[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}var i={};return s.m=t,s.c=i,s.p="/static/",s(0)}([function(t,s,i){var e,n;i(1),e=i(2);var o=i(3);n=e=e||{},"object"!=typeof e["default"]&&"function"!=typeof e["default"]||(n=e=e["default"]),"function"==typeof n&&(n=n.options),n.render=o.render,n.staticRenderFns=o.staticRenderFns,t.exports=e},function(t,s){},function(t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s["default"]={props:{source:{"default":null,required:!0}},data:function(){return{open:!1,timeWidth:541,voiceWidth:70,tipShow:!1,tipWidth:25,tipText:"",init:!0,status:{playing:!1,silent:!1,menuShow:!1,model:"list"},time:{cur:"00:00",all:"00:00"},now:{},list:[]}},created:function(){var t=void 0;for(t in this.source)this.list.push(this.source[t].id)},methods:{musicToggle:function(){this.open=!this.open,this.init&&(this.init=!1,this.loadSource(this.source[0],!1))},musicSelect:function(t){t.id!==this.now.id&&(t.selected?this.list.splice(this.list.indexOf(t.id),1):this.list.push(t.id),t.selected=!t.selected)},next:function(t){if("loop"!==this.status.model){var s=this.now.id,i=this.list.length,e=void 0,n=void 0,o=void 0;if("list"===this.status.model){for(e in this.list)if(this.list[e]===s)break;o=this.list[t?e==i-1?0:++e:0==e?--i:--e]}else o=this.list[Math.floor(Math.random()*i+1)-1];for(n in this.source)if(this.source[n].id===o){this.loadSource(this.source[n]);break}}},loadSource:function(t){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this.now.playing){if(this.now.id===t.id)return;this.now.playing=!1}t.playing=!0,this.now=t,this.$refs.audio.setAttribute("src",this.now.src),this.$refs.banner.setAttribute("src",this.now.img),s&&(this.$refs.audio.play(),this.status.playing=!0)},changeModel:function(){var t="";switch(this.status.model){case"list":t="rand",this.$refs.audio.loop=!1;break;case"rand":t="loop",this.$refs.audio.loop=!0;break;case"loop":t="list",this.$refs.audio.loop=!1}this.status.model=t},formatSeconds:function(t){var s=0,i=0;return t>60?(s=parseInt(t/60),t=(t%60).toFixed(0),s>60&&(i=parseInt(s/60),s=parseInt(s%60))):t=parseInt(t),t=t<10?"0"+t:t,s=s<10?"0"+s:s,[i,s,t]}},mounted:function(){var t=this,s=this.$refs.audio;s.volume=.5,s.oncanplay=function(){},s.oncanplaythrough=function(){},s.onended=function(){t.status.playing=!1,t.next(!0)},s.onloadedmetadata=function(){var s=t.formatSeconds(this.duration);t.time.all=s[1]+":"+s[2]},s.onplay=function(){},s.onwaiting=function(){},s.ontimeupdate=function(){var s=t.formatSeconds(this.currentTime);t.$refs.curtime.style.width=t.timeWidth*this.currentTime/this.duration+"px",t.time.cur=s[1]+":"+s[2]},s.onplaying=function(){},this.$refs.muted.onclick=function(){t.status.silent=!t.status.silent,s.muted=!s.muted},this.$refs.paused.onclick=function(){t.status.playing=!t.status.playing,s.paused?s.play():s.pause()},this.$refs.allvoice.onclick=function(i){s.volume=i.layerX/t.voiceWidth,t.$refs.curvoice.style.width=i.layerX+"px"},this.$refs.alltime.onclick=function(i){t.$refs.curtime.style.width=i.layerX+"px",s.currentTime=i.layerX/t.timeWidth*s.duration},this.$refs.alltime.onmousemove=function(i){var e=t.formatSeconds(s.duration/t.timeWidth*i.layerX);t.tipShow=!0,t.$refs.tip.style.left=i.layerX-t.tipWidth+"px",t.tipText=e[1]+":"+e[2]}}}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{"class":[open?"M-open":"M-close"],attrs:{id:"music"}},[_h("audio",{ref:"audio"})," ",_h("div",{staticClass:"M-main"},[_h("div",{staticClass:"M-warp"},[_h("img",{ref:"banner",staticClass:"M-face"})," ",_h("div",{staticClass:"M-control"},[_h("div",{staticClass:"header"},[_h("div",[_h("a",[_s(now.name)])," ",_m(0)," ",_h("a",[_s(now.player)])])," ",_h("button",{"class":["menu-btn",status.menuShow?"menu-click":""],on:{click:function(t){status.menuShow=!status.menuShow}}})])," ",_h("div",{staticClass:"center"},[_h("div",{staticClass:"M-play-control"},[_h("button",{staticClass:"sm-btn prev",on:{click:function(t){next(!1)}}})," ",_h("button",{ref:"paused","class":["lg-btn",status.playing?"play-go":"play-wait"]})," ",_h("button",{staticClass:"sm-btn next",on:{click:function(t){next(!0)}}})," ",_h("button",{"class":["sm-btn","M-model","M-model-"+status.model],on:{click:changeModel}})])," ",_h("div",{staticClass:"M-voice-control"},[_h("button",{ref:"muted","class":["sm-btn",status.silent?"voice-no":"voice-go"]})," ",_h("span",{ref:"allvoice",staticClass:"M-all-voice"},[_h("span",{ref:"curvoice",staticClass:"M-cur-voice"})])])])," ",_h("div",{staticClass:"footer"},[_h("span",[_s(time.cur)+" / "+_s(time.all)])])])])," ",_h("span",{ref:"alltime",staticClass:"M-allBar",on:{mouseout:function(t){tipShow=!1}}},[_h("span",{ref:"curtime",staticClass:"M-curBar"})])," ",_h("div",{directives:[{name:"show",value:tipShow,expression:"tipShow"}],ref:"tip",staticClass:"M-tip"},[_s(tipText),_m(1)])," ",_h("div",{"class":["M-menu",status.menuShow?"menu-show":""]},[_h("div",{staticClass:"header"},[_m(2)," ",_h("span",{staticClass:"close",on:{click:function(t){status.menuShow=!1}}},["×"])])," ",_h("div",{staticClass:"body"},[_m(3)," ",_l(source,function(t){return _h("div",{staticClass:"item"},[_h("div",{staticClass:"left"},[_h("a",{"class":["select",t.selected?"selected":""],on:{click:function(s){musicSelect(t)}}})," ",_h("div",[_h("span",{directives:[{name:"show",value:t.playing,expression:"item.playing"}],"class":["icon",status.playing?"icon-play":"icon-pause"]})," ",_h("a",{on:{click:function(s){loadSource(t)}}},[_s(t.name)])])," ",_h("div",{staticClass:"hover"},[_h("button",{staticClass:"sm-btn play",attrs:{title:"点击播放"},on:{click:function(s){loadSource(t)}}})," ",_h("button",{staticClass:"sm-btn menu",attrs:{title:"加入列表"},on:{click:function(s){musicSelect(t)}}})])])," ",_h("span",{staticClass:"right"},[_s(t.player)])])})])])])," ",_h("button",{staticClass:"toggle",on:{click:musicToggle}})])},staticRenderFns:[function(){with(this)return _h("span",{staticClass:"M-dot"})},function(){with(this)return _h("em",[_h("i")])},function(){with(this)return _h("span",{staticClass:"list"},["歌曲列表"])},function(){with(this)return _h("div",{staticClass:"title"},[_h("a",{staticClass:"select selected"})," ",_h("div",{staticClass:"left"},["歌曲"])," ",_h("div",{staticClass:"right"},["歌手"])])}]}}])});